<% @selected_tab = :get %>

<%= render(:partial => 'aae_widget_nav') %>

<div id="article">

<%= error_messages_for 'widget' %>

<h2>Create your Ask an Expert Widget</h2>
<% form_tag({:controller => 'widgets/aae', :action => 'generate_widget_code'}) do %>
   <fieldset>
      <p>Select the location that you want your widget to cover. This will allow questions to be routed to experts who select the corresponding location in their Ask an Expert preferences.</p>
    
      <%= render(:partial => 'shared/location_county') %>
    
      <p>
         <label>Name your widget <span>(in order to track and find questions entered through it)</span>
         <%= text_field(:widget, :name) %>
         </label>
      </p>
    
      <p>
         <label>
         <%= check_box(:widget,:upload_capable, {:class => "checkbox" ,:checked => true}) %> Enable photo upload for your widget
         </label>
      </p>
      
      <p>
         <label>
         <%= check_box(:widget, :show_location, {:class => "checkbox"}) %> Show location fields on your widget <br/>
         <em>Note: if enabled, any provided location will override the default location for this widget.</em>
         </label>
      </p>
      
      <p>
         <label>
         <%= check_box(:widget, :enable_tags, {:class => "checkbox", :onclick => "if(this.checked) {$('widget_tag_field').show();} else {$('widget_tag_field').hide(); }"}) %> Enable taggging for this widget<br/>
         <em>Note: once enabled, this cannot be changed</em>
         </label>
      </p>
      
      <div id="widget_tag_field" style="<%= (@widget.enable_tags? ? 'display:block;' : 'display:none;') %>">
         <p>
      	     <label for="tag_list">Tag submitted questions from this widget with: 
      	     <%= text_area_tag(:tag_list,'',{:rows => "4", :class => 'keywords', "onChange" => "fitTextArea(this)", "onKeyUp" => "fitTextArea(this)"}) %>
      	     <em>Separate tags with commas.</em>
      	     </label>
      	 </p>
      </div>
          
      <p><%= submit_tag "Get the Widget Code!", :disable_with => "Submitting..." %></p>
    </fieldset>
<% end %>

</div>