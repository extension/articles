<div id="date_range">
    <h4 id="selected_range"><%= (@dateinterval ? "#{@dateinterval[0].strftime('%b %e, %Y')} - #{@dateinterval[1].strftime('%b %e, %Y')}" : "#{@earliest_date.strftime('%b %e, %Y')} - #{@latest_date.strftime('%b %e, %Y')} <span>(all data)</span>") %></h4>

 
        <% form_tag ({:action => params[:action], :id => ((@user) ? @user.id : nil) }) do %>
      
         
          <%= calendar_date_select_tag "datefrom", ((@dateinterval) ? @dateinterval[0].strftime('%Y-%m-%d') : @earliest_date.strftime('%Y-%m-%d')), :popup => true%><span>to</span><%= calendar_date_select_tag "dateto", ((@dateinterval) ? @dateinterval[1].strftime('%Y-%m-%d') : @latest_date.strftime('%Y-%m-%d')), :popup => true%> 
            <%= submit_tag 'Go' %>
        <% end%>
        
        <% if (@dateinterval) %>
            <% form_tag ({:action => params[:action], :id => ((@user) ? @user.id : nil) }) do %>
                <%= submit_tag 'Show all'%>
                <% end%>
        <% end %>
</div>